1、一致性算法

使一组机器像一个整体一样工作，即使部分机器故障

2、相对于Paxos，Raft的进步

可理解性更强（往下看）

3、复制状态机

状态机的复制，例如在GFS、HDFS 和 RAMCloud，都需要一个独立的复制状态机来管理领导选举和存储配置信息，这样当领导人宕机的时候，复制状态机可以存活下来。

4、复制状态机的实现

相同的指令序列 → 相同状态的状态机 → 相同的状态和输出

关键是保证多个机器上的日志一致（包括顺序和内容）

*一致性算法的任务是保证复制日志的一致性。*

*服务器上的一致性模块接收客户端发送的指令然后添加到自己的日志中。它和其他服务器上的一致性模块进行通信来保证每一个服务器上的日志最终都以相同的顺序包含相同的请求，即使有些服务器发生故障。一旦指令被正确的复制，每一个服务器的状态机按照日志顺序处理他们，然后输出结果被返回给客户端。因此，服务器集群看起来形成了一个高可靠的状态机。*

[https://github.com/maemual/raft-zh_cn/raw/master/images/raft-图1.png](https://github.com/maemual/raft-zh_cn/raw/master/images/raft-%E5%9B%BE1.png)

[]()

可能出现那些问题？（*实际系统中使用的一致性算法通常含有以下特性）*

- *安全性保证（绝对不会返回一个错误的结果）：在非拜占庭错误情况下，包括网络延迟、分区、丢包、重复和乱序等错误都可以保证正确。*
- *可用性：集群中只要有大多数的机器可运行并且能够相互通信、和客户端通信，就可以保证可用。因此，一个典型的包含 5 个节点的集群可以容忍两个节点的失败。服务器被停止就认为是失败。它们稍后可能会从可靠存储的状态中恢复并重新加入集群。*
- *不依赖时序来保证一致性：物理时钟错误或者极端的消息延迟只有在最坏情况下才会导致可用性问题。*
- *通常情况下，一条指令可以尽可能快的在集群中大多数节点响应一轮远程过程调用时完成。小部分比较慢的节点不会影响系统整体的性能。*