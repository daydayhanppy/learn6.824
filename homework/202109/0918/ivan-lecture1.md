# lecture1

> https://mit-public-courses-cn-translatio.gitbook.io/mit6-824/lecture-01-introduction/1.1-fen-bu-shi-xi-tong-de-qu-dong-li-he-tiao-zhan-drivens-and-challenges

## 1 分布式系统的驱动力和挑战

### 驱动力

- 高**性能**计算：并行运算，大量CPU、内存、磁盘在并行运行
- **容错**：如一台机器故障，可以切换到另一台
- 存在天然分布的问题：如银行在伦敦和纽约拥有两台服务器
- 安全性：将不被信任的代码在一定范围内运行

### 挑战

- 并发：并发编程和复杂交互带来的问题、时间依赖的问题（同步、异步）
- 局部错误：多台计算机组成的分布式系统经常是一部分在工作，一部分停止运行
- 性能：实际1000台机器达到了多少性能

## 2 课程结构

lab1：MapReduce

lab2：Raft，通过复制和出现故障时自动切换

lab3：使用 Raft 算法建立一个可以容错的 KV 服务

lab4：将 KV 服务器分发到独立集群中



## 3 分布式系统的抽象和实现工具

基础架构：存储、通信（网络）、计算

目标：存储和计算上设计简单的结构，隐藏分布式的特性。

**工具**

- RPC(Remote Procedure Call)：在不可靠网络上进行可靠通信
- 线程：提供结构化的并发操作方式
- 锁：实现层面上，考虑并发的控制

## 4 可拓展性(Scalability)

使两台机器执行一个程序的性能为一台机器的两倍

目标：通过增加机器的方式实现性能的拓展

## 5 可用性(Availability)

容错：大规模系统会将罕见的问题放大。0.3% 的故障率下，1000 台机器的系统平均每天有 3 台机器故障。

目标：系统能屏蔽错误，在出错时继续运行。

可用性：在特定的故障范围内，系统仍然能提供服务。

可恢复性：出现故障机器停止，人工恢复重启后能继续正常运行。一个具备可用性的系统通常也需要有可恢复性。

**工具**

- 存放 checkpoint 在非易失存储上：防止电源故障的损失。
  - 非易失存储的特点：频繁写入代价大，因此需要避免频繁写入
- 复制 (replication)：副本可能偏离同步的状态，而不再互为副本

## 6 一致性(Consistency)

一致性：定义操作行为。

如 KV 系统的 get 操作，在单机中可以保证一致，但是分布式系统中，从不同副本中 get 的数据可能不一致。

强一致：get 可以得到最近一次完成的 put 写入的值，强一致可能有很大的代价

弱一致：get 得到的可能是之前的数据