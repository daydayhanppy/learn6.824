## 6.3 诊断工具

 RPC日志记录了网络上所有请求和响应的详细记录，方便重现GFS的消息交互来诊断问题。

日志对系统性能影响很小，因为其写入方式为顺序的、异步的。



## 7. 度量

## 7.1 小规模基准测试

机器部署：1台Master，2台Master复制节点，16台ChunkServer， 16台Client（均为PIII 1.4GHz CPU，2GB内存，2个80G/5400rpm硬盘，100Mbps全双工以太网，GFS集群和Client集群各接入一个交换机，2个交换机用1GMbps线路连接）。

读操作： 

- 当N=16时，整体读取速度为94MB/s，理论极限为125MB/s（1Gbps线路），为理论极限值的75%。
- 当N增大时，单Client的读取效率下降（N=5为80%，N=16为75%），原因为Client增多时，同时读单个ChunkServer的几率也增加

写操作：

- 当N=16时，整体写入速度为35MB/s，理论极限为67MB/s（要写入到16个ChunkServer中的3个副本，每个ChunkServer网卡12.5MB/s，故12.5*16/3=67MB/s），约为理论极限的50%
- 当N增大时，单Client的读取效率基本持平（均约为50%）。在实际应用中，并没有成为主要问题

记录追加操作：

- 性能受限于保存文件最后一个Chunk块的ChunkServer的带宽，与N大小无关。在实际应用中，ChunkServer的网络拥塞也不是一个严重问题

