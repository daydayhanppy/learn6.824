# MapReduce

## 4 技巧

- 分区函数：将中间值 KV 对分区，并分发给 reduce 任务的函数。
- 顺序保证：保证在给定的分区中，中间值 KV 数据的处理顺序按 key 增量处理。
- Combiner 函数：由用户指定，在 map 任务执行的 worker 上执行，将中间值 KV 对进行一次合并
- 输入输出类型
  - 文本模式：每一行为 KV 对，K 是文件偏移量，V 是文件内容

## 5 性能

在一个大型集群上运行的两个计算

- 大约 1TB 的数据：特定的模式匹配
- 大约 1TB 的数据：排序。

## 6 经验

MapReduce 的应用：

1. 大规模机器学习问题
2. Google News 和 Froogle 产品的集群问题
3. 从公众查询产品的报告中抽取数据
4. 从位置搜索网页中抽取地理位置信息
5. 大规模的图形计算

### 6.1 大规模索引

索引系统的输入数据：网络爬虫抓取回来的海量的文档，这些文档数据都保存在 GFS 文件系统里。

索引部分的代码中，容错、分布式以及并行计算的处理由 MapReduce 库提供的。

## 8 结束语

- MapReduce 封装了并行处理、容错处理、数据本地化优化、负载均衡等技术
- MapReduce生成各种数据：Google 的网络搜索服务所需要的数据、用于排序、数据挖掘、机器学习等
- 约束编程模式可以使并行和分布式计算简单化， 易于构造容错的计算环境
- 网络带宽是稀缺资源，大量的系统优化是针对减少网络传输量为目
- 多次执行相同的任务可以减少硬件配置不平衡带来的负面影响





